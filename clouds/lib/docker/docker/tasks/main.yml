---
- name: Check if Docker is installed Debian
  shell: dpkg-query -l docker-engine
  register: deb_is_installed
  ignore_errors: yes
  changed_when: no
  when: ansible_os_family == "Debian"

- name: Check if Docker is installed Redhat
  shell: rpm -q docker-engine
  register: rpm_is_installed
  ignore_errors: yes
  changed_when: no
  when: ansible_os_family == "RedHat"

- name: Install Docker
  shell: wget -qO- https://get.docker.com/ | sudo sh
  when: deb_is_installed|failed or rpm_is_installed|failed

- name: Install Docker Compose
  get_url:
    url: https://github.com/docker/compose/releases/download/1.5.2/docker-compose-Linux-x86_64
    dest: /usr/local/bin/docker-compose
    mode: 0755
  become: true
  when: deb_is_installed|failed or rpm_is_installed|failed

- name: Enable Docker on reboot
  service: name=docker state=started enabled=yes 
